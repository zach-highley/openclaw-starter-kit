// Memory-optimized config: hybrid search, session indexing, embedding cache
// Apply AFTER basic setup. These settings improve memory recall significantly.
//
// Hybrid search = vector similarity + BM25 keyword matching
// Session indexing = makes past conversations searchable
// Embedding cache = faster reindexing after restarts
{
  "memorySearch": {
    "sources": ["memory", "sessions"],
    "query": {
      "hybrid": {
        "enabled": true,
        "vectorWeight": 0.7,
        "textWeight": 0.3,
        "candidateMultiplier": 4
      }
    },
    "cache": {
      "maxEntries": 50000
    }
  },
  "experimental": {
    "sessionMemory": true
  },
  "agents": {
    "defaults": {
      "compaction": {
        "memoryFlush": {
          "enabled": true,
          "softThresholdTokens": 4000,
          "systemPrompt": "Session nearing compaction. Save durable context to memory/YYYY-MM-DD.md AND any structured state files. Include: active tasks, decisions made, things to remember.",
          "prompt": "Write lasting notes to memory files and state files. Reply with NO_REPLY when done."
        }
      }
    }
  }
}
