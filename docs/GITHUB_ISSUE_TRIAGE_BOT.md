# GitHub Issue Triage Bot (safe, opt-in)

This repo includes a **conservative** GitHub issue triage loop:

- Lists open issues via the `gh` CLI
- For **non-trivial** issues: posts a comment with clarifying questions + pointers
- For **docs-missing / obvious quick fixes**: can open a PR **only when explicitly enabled and label-driven**

The goal is to reduce maintainer load without letting automation spray commits across your repo.

## Important: bot comments are NOT Zach

The script signs its comments as **“Yoda (automation bot)”**.

- The content is generated by automation.
- It is **not** Zach speaking.
- The GitHub account that actually posts the comment is whichever account your `gh` auth token belongs to.

## Requirements

- `gh` CLI installed
- `gh auth login` completed (or `GITHUB_TOKEN` set)
- `git` installed
- Python 3.11+ (uses `tomllib`)

## Setup

1) Copy the config example:

```bash
cp config/examples/issue-triage.toml ./issue-triage.toml
# edit repo.full_name
$EDITOR ./issue-triage.toml
```

2) Dry run (default):

```bash
python3 scripts/gh_issue_triage.py --config ./issue-triage.toml --dry-run
```

3) Apply mode (posts comments / opens PRs):

```bash
python3 scripts/gh_issue_triage.py --config ./issue-triage.toml --apply
```

## How “autofix PRs” work (and why it’s safe)

Autofix is **off by default**.

Even when enabled, the bot will ONLY open a PR if **both** are true:

1) `autofix.enabled = true` in `issue-triage.toml`
2) The issue has a label matching one of your configured rules:

```toml
[autofix]
enabled = true

[[autofix.rules]]
name = "readme-typo"
issue_label = "autofix:readme-typo"
commands = [
  # Replace a known typo (example). Customize for your repo.
  "python3 scripts/fix_readme_typo.py --path README.md --old 'teh' --new 'the' --apply"
]
```

This keeps the bot from guessing how to fix issues.

## Cron example (opt-in)

Only add this after you’ve tested `--dry-run` and you trust your config.

```cron
# Every 6 hours, triage up to 10 issues.
# Logs to a file so you can audit what it did.
0 */6 * * * cd /path/to/openclaw-starter-kit && \
  python3 scripts/gh_issue_triage.py --config ./issue-triage.toml --apply --max-actions 10 \
  >> ./triage.log 2>&1
```

## Notes / gotchas

- The triage script assumes it’s run from inside a git checkout of the repo (for autofix PRs).
- If your working tree is dirty, autofix will refuse to run.
- Use labels like `bot:ignore` or `triage:ignore` to skip an issue.
